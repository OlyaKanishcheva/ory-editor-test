{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar changes_1 = require(\"../changes\");\n\nvar utils_1 = require(\"../utils\");\n/**\r\n * User pressed Delete in an editor\r\n */\n\n\nfunction onBackspace(event, editor, opts, // tslint:disable-next-line:no-any\nnext) {\n  var value = editor.value;\n  var selection = value.selection;\n  var startOffset = value.selection.start.offset; // Only unwrap...\n  // ... with a collapsed selection\n\n  if (selection.isExpanded) {\n    return next();\n  } // ... when at the beginning of nodes\n\n\n  if (startOffset > 0) {\n    return next();\n  } // ... in a list\n\n\n  var currentItem = utils_1.getCurrentItem(opts)(value);\n\n  if (!currentItem) {\n    return next();\n  } // ... more precisely at the beginning of the current item\n\n\n  if (!selection.isCollapsed && selection.anchor.isAtEndOfNode(currentItem)) {\n    return next();\n  }\n\n  event.preventDefault();\n  return changes_1.unwrapList(opts, editor);\n}\n\nexports.default = onBackspace;","map":null,"metadata":{},"sourceType":"script"}